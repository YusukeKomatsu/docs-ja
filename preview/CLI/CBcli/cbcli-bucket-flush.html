<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="Buckets are flushed by enable the flush option then flushing."><meta name="DC.Relation" scheme="URI" content="../../CLI/CBcli/cbcli-buckets.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBcli/cbcli-bucket-create.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBcli/cbcli-bucket-compact.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cbcli-bucket-flush">
<link rel="stylesheet" type="text/css" href="../../commonltr.css">
<title>Flushing buckets</title>
</head>
<body id="cbcli-bucket-flush">


  <h1 class="title topictitle1">Flushing buckets</h1>

  
  <div class="body refbody"><p class="shortdesc">Buckets are flushed by enable the flush option then flushing.</p>

    <div class="section"><h2 class="title sectiontitle">Description</h2> Flushing buckets involves: <ol class="ol">
        <li class="li">Enable the flush buckets option.</li>

        <li class="li">Flush the bucket.</li>

      </ol>

      <p class="p">When you want to flush a data bucket, first enable this option and then actually issue the
        command to flush the data bucket. The <samp class="ph codeph">--enable-flush</samp> option is either true
        or false. False is 0, meaning, do not enable flush (default). True is 1, meaning enable
        flush.</p>

      <p class="p">You can enable this option when you create the data bucket or edit bucket properties.</p>

      <div class="note important"><span class="importanttitle">Important:</span> After you explicitly enable data bucket flush, flush the data from the
        bucket. Flushing a bucket is data destructive. Client applications using this are advised to
        double check with the end user before sending such a request. You can control and limit the
        ability to flush individual buckets by setting the <samp class="ph codeph">flushEnabled</samp> parameter
        on a bucket in Couchbase web console.</div>

      <div class="note warning"><span class="warningtitle">Warning:</span> We do not advise that you enable this option if your data bucket is in a
        production environment. </div>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">CLI command and parameter</h2>
      <p class="p">Flush can be enable when either creating or editing a bucket with the 
        <samp class="ph codeph">bucket-create</samp> and <samp class="ph codeph">bucket-edit</samp> commands.</p>

      
      <p class="p">To enable bucket flush when creating a bucket, set the 
          <samp class="ph codeph">--enable-flush</samp> parameter to 1:</p>

      
      <p class="p">To flush the bucket, use <samp class="ph codeph">couchbase-cli bucket-flush</samp> command.</p>

      
    </div>


      
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
      <p class="p">By default, the <samp class="ph codeph">bucket-flush</samp> command confirms whether or not you truly want to
        flush the data bucket. You can optionally call this command with the
        <samp class="ph codeph">--force</samp> option to flush data without
        confirmation.</p>

      <p class="p">Request syntax:</p>

      <pre class="pre codeblock">
couchbase-cli bucket-flush -c [localhost]:8091 -u [admin] -p [password] 
    --bucket=[bucket-name] 
    --enable-flush=[0 | 1]
    [OPTIONS]
      </pre>

      
    </div>


      
  <div class="section"><h2 class="title sectiontitle">Example</h2>
    <p class="p">Example request:</p>

      <pre class="pre codeblock">
couchbase-cli bucket-flush -c 192.168.0.1:8091 -u Administrator -p password 
       --bucket=testBucket
       --enable-flush=1
</pre>
</div>

    
    <div class="section"><h2 class="title sectiontitle">Response</h2>
    <p class="p">Example request response where you need to verify whether you want to flush the bucket. In
        this case, you need to specify either Yes or No.</p>

      <pre class="pre codeblock">Running this command will totally PURGE database data from disk. Do you really want to do it? (Yes/No)</pre>

      
      <p class="p">Example request error response where the bucket that you want to flush is set up with XDCR replication:</p>

      <pre class="pre codeblock">
ERROR: unable to bucket-flush; please check if the bucket exists or not; (503) Service Unavailable
{u'_': u'Cannot flush buckets with outgoing XDCR'}
      </pre>

    </div>


  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-buckets.html" title="Buckets are managed with the couchbase-cli tool and the bucket-* commands.">Buckets</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-bucket-create.html" title="Buckets are created with the couchbase-cli bucket-create command.">Creating buckets</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-bucket-compact.html" title="Buckets are compacted using the couchbase-cli bucket-compact command.">Compacting buckets</a></div>
</div>
</nav>
</body>
</html>