<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="To create an XDCR replication, use the POST /controller/createReplication HTTP method and URI."><meta name="DC.Relation" scheme="URI" content="../REST/rest-xdcr-intro.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-xdcr-create-ref.html">
<meta name="DC.Relation" scheme="URI" content="../Tasks/xdcr-configure-replications.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rest-xdcr-create-replication">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Creating XDCR replications</title>
</head>
<body id="rest-xdcr-create-replication">


  <h1 class="title topictitle1">Creating XDCR replications</h1>

  
  <div class="body refbody"><p class="shortdesc">To create an XDCR replication, use the <samp class="ph codeph">POST /controller/createReplication</samp> HTTP method and URI.</p>

    
    <div class="section"><h2 class="title sectiontitle">Description</h2>
      <p class="p">Data replication occurs from a source cluster to a destination cluster. 
      Once a replication is created, data replication between clusters automatically begins.</p>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
      
      <pre class="pre codeblock">POST /controller/createReplication</pre>

       </div>

    
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
      <p class="p">Curl request syntax:</p>

      <pre class="pre codeblock">curl -v -X POST -u [admin]:[password] 
  http://[localhost]:[port]/controller/createReplication
  -d fromBucket=[bucket-name]
  -d toCluster=[cluster-name]
  -d toBucket=[bucket-name]
  -d replicationType=continuous
  -d type=[capi | xmem]
      </pre>

      
      <div class="note note"><span class="notetitle">Note:</span> The <samp class="ph codeph">type</samp> values, capi and xmem, are represented by version1
        and version2 in the web console. Default: <samp class="ph codeph">xmem</samp>. 
        Because <samp class="ph codeph">xmem</samp> is the default for <samp class="ph codeph">Type</samp>, 
        this parameter is not required when creating <samp class="ph codeph">xmem</samp> replications.
        The <samp class="ph codeph">replicationType</samp> value is always <samp class="ph codeph">continuous</samp>.</div>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
      <p class="p">Curl request example:</p>

      <pre class="pre codeblock">curl -v -X POST -u admin:password1 
  http://10.4.2.4:8091/controller/createReplication
  -d fromBucket=beer-sample
  -d toCluster=remote1
  -d toBucket=remote_beer
  -d replicationType=continuous
  --d type=capi
      </pre>

      
      <p class="p">Raw HTTP request:</p>

      <pre class="pre codeblock">POST / HTTP/1.1
Authorization: Basic QWRtaW5pc3RyYXRvcjpwYXNzd29yZDE=
User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
Host: 10.4.2.4:8091
Accept: */*
Content-Length: 126
Content-Type: application/x-www-form-urlencoded
</pre>

      
    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Response</h2>
      
      <p class="p">If the replication is created, data replication immediately begins replicating data from
        the source to destination cluster and a response similar to the following is returned.</p>

      <pre class="pre codeblock">{
  "id": "9eee38236f3bf28406920213d93981a3/beer-sample/remote_beer",
  "database": "http://10.4.2.4:8092/_replicator"
}
</pre>

      <p class="p">The unique document ID returned in the JSON is a reference that is used to delete the replication.</p>

    </div>

    

    
  </div>

  <nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-xdcr-intro.html" title="The XDCR REST API is used to manage Cross Datacenter Replication (XDCR) operations.">XDCR API</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../REST/rest-xdcr-create-ref.html" title="To create an XDCR reference to a destination cluster, use the POST /pools/default/remoteClusters HTTP method and URI.">Creating a destination cluster reference</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../Tasks/xdcr-configure-replications.html" title="Configuration of XDCR replications is done on a per-bucket basis.">Configuring XDCR replications</a></div></div>
</nav>

</body>
</html>