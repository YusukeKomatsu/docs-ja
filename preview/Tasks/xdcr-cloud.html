<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="topic">
<meta name="DC.Relation" scheme="URI" content="../Concepts/bp-deployment-considerations.html">
<meta name="DC.Relation" scheme="URI" content="../Concepts/bp-cloudDeployment.html">
<meta name="DC.Relation" scheme="URI" content="../Install/setup-overview.html">
<meta name="DC.Relation" scheme="URI" content="../Install/install-networkPorts.html">
<meta name="DC.Relation" scheme="URI" content="../Concepts/bp-cloudDeployment.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="topic2417">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>XDCR in cloud deployments</title>
</head>
<body id="topic2417">


  <h1 class="title topictitle1">XDCR in cloud deployments</h1>

  <div class="body">
    <p class="p">If you want to use XDCR within a cloud deployment to replicate between two or more clusters
      that are deployed in the cloud, there are some additional configuration requirements:</p>

    <ul class="ul">
      <li class="li">Use a public DNS names and public IP addresses for nodes in your clusters.</li>

    </ul>

    <p class="p">Cloud services support the use of a public IP address to allow communication to the nodes
      within the cluster. Within the cloud deployment environment, the public IP address will
      resolve internally within the cluster, but allow external communication. In Amazon EC2, for
      example, ensure that you have enabled the public interface in your instance configuration,
      that the security parameters allow communication to the required ports, and that public DNS
      record exposed by Amazon is used as the reference name.</p>

    <p class="p">Configure the cluster with a fixed IP address and the public DNS name according to
      the recommendations for using Couchbase in the cloud.</p>

    <ul class="ul">
      <li class="li">Use a DNS service to identify or register a CNAME that points to the public DNS address of
        each node within the cluster. This will allow you to configure XDCR to use the CNAME to a
        node in the cluster. The CNAME will be constant, even though the underlying public DNS
        address may change within the cloud service.</li>

    </ul>

    <p class="p">The CNAME record entry can then be used as the destination IP address when configuring
      replication between the clusters using XDCR. If a transient failure causes the public DNS
      address for a given cluster node to change, update the CNAME to point to the updated public
      DNS address provided by the cloud service.</p>

    <p class="p">By updating the CNAME records, replication should be able to persist over a public, internet-
      based connection, even though the individual IP of different nodes within each cluster
      configured in XDCR.</p>

    <p class="p">For additional security, you should configure your security groups to allow traffic only on
      the required ports between the IP addresses for each cluster. To configure security groups,
      you will need to specify the inbound port and IP address range. You will also need to ensure
      that the security also includes the right port and IP addresses for the remainder of your
      cluster to allow communication between the nodes within the cluster.</p>

    
  </div>

  <nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Concepts/bp-deployment-considerations.html" title="アクセス制限、ノード間通信、スワップの設定、接続タイムアウトなどの考慮事項について説明します。">デプロイ構成の考慮事項</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../Concepts/bp-cloudDeployment.html" title="Couchbase Server is extremely easy to deploy in the cloud.">Couchbase in the cloud</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="../Install/setup-overview.html" title="Quick overview of the setup process.">Couchbase setup overview</a></div>
<div><a class="link" href="../Install/install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">Network ports</a></div>
<div><a class="link" href="../Concepts/bp-cloudDeployment.html" title="Couchbase Server is extremely easy to deploy in the cloud.">Couchbase in the cloud</a></div></div>
</nav>

</body>
</html>