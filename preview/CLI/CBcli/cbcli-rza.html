<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="Rack-Zone Awareness enables logical groupings of servers on a cluster where each server group physically belongs to a rack or Availability Zone. Enterprise Edition only."><meta name="DC.Relation" scheme="URI" content="../../CLI/cbcli-intro.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBcli/cbcli-commands.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBcli/cbcli-buckets.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cbcli-rza">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../commonltr.css">
<title>Rack-zone awareness</title>
</head>
<body id="cbcli-rza">


   <h1 class="title topictitle1">Rack-zone awareness</h1>

   


   <div class="body refbody"><p class="shortdesc">Rack-Zone Awareness enables logical groupings of servers on a cluster where each server
      group physically belongs to a rack or Availability Zone. <strong class="ph b">Enterprise Edition only.</strong></p>

      <div class="section"><h2 class="title sectiontitle">Description</h2>
      <p class="p">The Rack-Zone Awareness feature provides the ability to specify that active and
         corresponding replica partitions be created on servers that are part of a separate rack or
         zone. To enable Rack-Zone Awareness, all servers in a cluster must be upgraded. </p>


      
      <div class="note note"><span class="notetitle">Note:</span> The Rack-Zone Awareness feature with its server group capability is an
         Enterprise Edition feature.</div>

      <p class="p">To configure servers into groups, use the <samp class="ph codeph">couchbase-cli</samp> tool with the
            <samp class="ph codeph">group-manage</samp> command.</p>

      </div>

      
      <div class="section"><h2 class="title sectiontitle">CLI command and parameters</h2>
         
         
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. group-manage options</span></caption>
               
               
               <thead class="thead" align="left">
                  <tr class="row">
                     <th class="entry" valign="top" width="50%" id="d7580e56">Option</th>

                     <th class="entry" valign="top" width="50%" id="d7580e59">Description</th>

                  </tr>

               </thead>

               <tbody class="tbody">
                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">&nbsp;</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">&nbsp;</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">-c HOST:PORT or --cluster=HOST:PORT</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Cluster location</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">-u USERNAME or --username=USERNAME</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Administrator username for the cluster</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">-p PASSWORD or --password=PASSWORD</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Administrator password for the cluster</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--list</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Shows the server groups and the servers assigned to each server group.</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--create --group-name=groupName</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Creates a server group.</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--delete --group-name=groupName</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Removes an empty server group.</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--rename=newGroupName --group-name=oldGroupName</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Renames an existing server group.</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--group-name=groupName --add-servers="HOST:PORT;HOST:PORT"</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Adds servers to a group.</td>

                  </tr>

                  <tr class="row">
                     <td class="entry" valign="top" width="50%" headers="d7580e56 ">--from-group=groupName --to-group=groupName
                        --move-servers="HOST:PORT;HOST:PORT"</td>

                     <td class="entry" valign="top" width="50%" headers="d7580e59 ">Moves one or more servers from one group to another.</td>

                  </tr>

               </tbody>

            </table>
</div>


      </div>

      
      <div class="section"><h2 class="title sectiontitle">Syntax</h2>
         <p class="p">General syntax with <samp class="ph codeph">group-manage</samp>:</p>

         
         <pre class="pre codeblock">
couchbase-cli group-manage -c [localhost]:[port] 
    -u [admin] -p [password]
    [options]
</pre>

      </div>

      
      <div class="section"><h2 class="title sectiontitle">Example: Creating server groups</h2>
         <p class="p">In the following example, a server group is
            created.</p>

         
         
         <div class="note note"><span class="notetitle">Note:</span> The <samp class="ph codeph">-create --group-name</samp> command can fail when an
            exclamation (!) is present inside the group name.
         </div>

         
         <pre class="pre codeblock">
couchbase-cli group-manage -c 192.168.0.1:8091 
   -u myAdminName
   -p myAdminPassword
   --create --group-name=myGroupName
</pre>
</div>

      
      <div class="section"><h2 class="title sectiontitle">Example: Adding servers to server groups</h2>
         
         <p class="p">In the following example, two
            servers are added to a server group using the <samp class="ph codeph">group-manage</samp>
            command.</p>

         
         <pre class="pre codeblock">
couchbase-cli group-manage -c 192.168.0.1:8091 
   -u myAdminName
   -p myAdminPassword
   --group-name=myNewGroup
   --add-servers="10.1.1.1:8091;10.1.1.2:8091"
</pre>

         
         <p class="p">In
            the following example, a server is added to the server group using the
               <samp class="ph codeph">server-add</samp> command.</p>

         
         
         <div class="note note"><span class="notetitle">Note:</span> The <samp class="ph codeph">couchbase-cli
            group-manage</samp> command is the preferred method of adding servers to server
            group.</div>

         
         <p class="p">If the <samp class="ph codeph">--group-name</samp> option is not specified with the <samp class="ph codeph">server-add</samp>
            command, the server is added to the default
         group.</p>

         
         <pre class="pre codeblock">
couchbase-cli server-add -c 192.168.0.1:8091
   --server-add=192.168.0.2:8091
   --server-add-username=Administrator
   --server-add-password=password
   --group-name=groupName
</pre>
</div>

      
      
      <div class="section"><h2 class="title sectiontitle">Example: Moving servers from server groups</h2>
         
         <p class="p">In the following example, two
            servers are moved from one server group to another using the
               <samp class="ph codeph">group-manage</samp>
         command.</p>

         
         <pre class="pre codeblock">
couchbase-cli group-manage -c 192.168.0.1:8091 
   -u myAdminName
   -p myAdminPassword
   --from-group=myFirstGroup
   --to-group=mySecondGroup
   --move-servers="10.1.1.1:8091;10.1.1.2:8091"
</pre>

      </div>

   </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/cbcli-intro.html" title="The couchbase-cli tool is used to perform operations on an entire cluster.">couchbase-cli tool</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-commands.html" title="Commands used with the CLI couchbase-cli tool.">couchbase-cli commands</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../CLI/CBcli/cbcli-buckets.html" title="Buckets are managed with the couchbase-cli tool and the bucket-* commands.">Buckets</a></div>
</div>
</nav>
</body>
</html>