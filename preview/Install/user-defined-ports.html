<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="topic">
<meta name="description" content="You can install and run Couchbase Server with user-defined ports rather than with the default ports."><meta name="DC.Relation" scheme="URI" content="../Install/RHEL-install-intro.html">
<meta name="DC.Relation" scheme="URI" content="../Install/rhel-installing.html">
<meta name="DC.Relation" scheme="URI" content="../Install/rhel-non-root-sudo.html">
<meta name="DC.Relation" scheme="URI" content="install-networkPorts.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="topic2033">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Using user-defined ports</title>
</head>
<body id="topic2033">


  <h1 class="title topictitle1">Using user-defined ports</h1>

  
  <div class="body"><p class="shortdesc">You can install and run Couchbase Server with user-defined ports rather than with the
    default ports.</p>

    <p class="p">To run Couchbase server on user-defined ports, make sure that the minimum RAM and CPU are
      available for the Couchbase instance. </p>

    <div class="note note"><span class="notetitle">Note:</span> Before creating user-defined ports, refer to the list of the <a class="xref" href="install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">reserved network ports</a>.</div>

    
    <div class="section"><h2 class="title sectiontitle">Setting up Couchbase Server with user-defined ports</h2>
    <ol class="ol">
      <li class="li">Install Couchbase Server
        <ul class="ul">
          <li class="li">If Couchbase Server is already installed and running, stop it.</li>

        </ul>
</li>

      <li class="li">Add the new user-defined ports to the <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span>
        file. <ul class="ul">
          <li class="li">The <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span> is the location
              from where the Couchbase Server picks up the configuration parameters.</li>

          <li class="li">If port numbers are not specified, default ports are used.</li>

          <li class="li">To override some or all default ports, append the user-defined ports to the file.</li>

        </ul>
</li>

      <li class="li">(Optional) CAPI port (default 8092) can be edited in the
          <span class="ph filepath">/opt/couchbase/etc/couchdb/default.d/capi.ini</span> file by replacing 8092 with the new
        port name.</li>

      <li class="li">If the Couchbase Server was previously configured, delete the
            <span class="ph filepath">opt/couchbase/var/lib/couchbase/config/config.dat</span> file to remove
          the old configuration.</li>

      <li class="li">Start Couchbase Server.</li>

    </ol>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Ports to change</h2>
      
    <p class="p">The following are the user-defined ports to add, replace, or append to the
        <span class="ph filepath">/opt/couchbase/etc/couchbase/static_config</span> file. </p>

    <pre class="pre codeblock">
{rest_port, 9000}.                                   
{mccouch_port, 8999}.                         
{memcached_port, 12000}.
{memcached_dedicated_port, 11999}.
{moxi_port, 12001}.
{short_name, "ns_1"}.
{ssl_rest_port,11000}.                       
{ssl_capi_port,11001}.
{ssl_proxy_downstream_port,11002}.
{ssl_proxy_upstream_port,11003}.
</pre>

    
    <div class="note note"><span class="notetitle">Note:</span> If the newly configured ports overlap with ports used by other running
        applications, Couchbase Server fails to start. If the newly configured ports overlap with
        ports used by Couchbase buckets, Erlang crash notifications appear in the log file. </div>

      <div class="note note"><span class="notetitle">Note:</span> In order to set up multiple nodes per machine, you need to assign unique
        values to these ports.</div>

      
    </div>

    <div class="section"><h2 class="title sectiontitle">How to map user-defined ports to the default ports</h2> This chart shows how
      certain user-defined ports are mapped to the default ports: <pre class="pre codeblock">
{rest_port, 9000}                    8091 Web administration port                                   
{mccouch_port, 8999}                 11213 Default value for mccouch                         
{memcached_port, 12000}              11211 Client interface (proxy)
{memcached_dedicated_port, 11999}    11211 Client interface (proxy)
{moxi_port, 12001}                   11210 Internal/external bucket port
{ssl_rest_port,11000}                18091 Internal REST HTTPS for SSL                                      
{ssl_capi_port,11001}                18092 Internal CAPI HTTPS for SSL
{ssl_proxy_downstream_port,11002}    11214 Incoming SSL proxy
{ssl_proxy_upstream_port,11003}      11215 Internal outgoing SSL proxy
</pre>

      <div class="note important"><span class="importanttitle">Important:</span> </div>
 All default ports are reserved and cannot be used for other
      purposes.</div>
 
  </div>

  <nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Install/RHEL-install-intro.html" title="Couchbase Server supports Red Hat (RHEL) and RHEL-based operating systems such as CentOS.">Red Hat/CentOS installation</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../Install/rhel-installing.html" title="Install Couchbase Server on RHEL using the rpm command-line tool with the downloaded RPM package.">Installing on RHEL</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../Install/rhel-non-root-sudo.html" title="Installing on RHEL as non-root, non-sudo is used only for development purposes.">Installing as non-root, non-sudo</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="install-networkPorts.html" title="Couchbase Server uses specific network ports for communication between server components and with the clients accessing the data stored in the Couchbase cluster.">Network ports</a></div></div>
</nav>

</body>
</html>