<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="Design documents are restored using the design_doc_only=1 option."><meta name="DC.Relation" scheme="URI" content="../CLI/cbrestore_tool.html">
<meta name="DC.Relation" scheme="URI" content="../CLI/cli-incremental-restore.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cbrestore-ddocs">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Restoring design documents</title>
</head>
<body id="cbrestore-ddocs">


  <h1 class="title topictitle1">Restoring design documents</h1>

  
  <div class="body refbody"><p class="shortdesc">Design documents are restored using the <samp class="ph codeph">design_doc_only=1</samp> option.</p>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
      <p class="p">Design documents are restored to a server node with the option,
          <samp class="ph codeph">design_doc_only=1</samp>. The documents are restored from a backup file (created
        with the <samp class="ph codeph">cbbackup</samp>) tool.</p>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
      <p class="p">Basic syntax:</p>

      <pre class="pre codeblock">
cbrestore [backup-location] http://[localhost]:8091 -x design_doc_only=1 -b [source-bucket] -B [destination-bucket]
      </pre>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
      <p class="p">The following example restores design documents from the backup file, ~/backup/a_bucket, 
        to the destination bucket, my_bucket, in a cluster. </p>

      <pre class="pre codeblock">
cbrestore ~/backup http://10.3.1.10:8091 -x design_doc_only=1 -b a_bucket -B my_bucket
</pre>

      <div class="p">If multiple source buckets were backed up, this command must be performed multiple times.
        In the following example, a cluster with two data buckets is backed up and has the following backup
        files: <ul class="ul">
          <li class="li"><samp class="ph codeph">~/backup/bucket_one/design.json</samp></li>

          <li class="li"><samp class="ph codeph">~/backup/bucket_two/design.jsonT</samp></li>

        </ul>
</div>

      
      <p class="p">The following command restores the design documents in both backup files to a bucket
        in a cluster named <samp class="ph codeph">my_bucket</samp>.</p>

      
      <pre class="pre codeblock">
cbrestore ~/backup http://10.3.1.10:8091 -x design_doc_only=1 -b bucket_one -B my_bucket

cbrestore ~/backup http://10.3.1.10:8091 -x design_doc_only=1 -b bucket_two -B my_bucket
</pre>

      
    </div>

    
    <div class="section"><h2 class="title sectiontitle">Response</h2>
    <p class="p">The following example response shows a successful restore.</p>

      <pre class="pre codeblock">
transfer design doc only. bucket msgs will be skipped.
done
      </pre>

    </div>

    
  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../CLI/cbrestore_tool.html" title="The cbrestore tool restores data from a file to an entire cluster or to a single bucket in the cluster.">cbrestore tool</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../CLI/cli-incremental-restore.html" title="Incremental restore operations are run by using the cbrestore command-line tool.">Restoring incrementally</a></div>
</div>
</nav>
</body>
</html>