<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="Bucket ejection from memory is set with POST /pools/default/buckets/default."><meta name="DC.Relation" scheme="URI" content="../REST/rest-bucket-intro.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-bucket-set-priority.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-bucket-parameters.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rest-bucket-ejection">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Setting metadata ejection</title>
</head>
<body id="rest-bucket-ejection">


  <h1 class="title topictitle1">Setting metadata ejection</h1>

  
  <div class="body refbody"><p class="shortdesc">Bucket ejection from memory is set with <samp class="ph codeph">POST
    /pools/default/buckets/default</samp>.</p>

    <div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
      <p class="p"> To set the maximum of thread workers, use the <samp class="ph codeph">evictionPolicy</samp> option. Default: valueOnly</p>

      <pre class="pre codeblock">POST /pools/default/buckets/default</pre>

      
      
      <p class="p">Value-only ejection (the default) removes the data from cache but keeps all keys and metadata fields for non-resident items. 
      When the value bucket ejection occurs, the item's value is reset. 
      Full metadata ejection removes all data including keys, metadata, and key-values from cache for non-resident items. 
      Full metadata ejection reduces RAM requirement for large buckets.</p>

      
      <div class="note important"><span class="importanttitle">Important:</span> When editing bucket properties, be sure to specify all bucket
        properties. If a bucket property is not specified (whether or not you are changing the
        existing value), Couchbase Server may reset the property to the default. Even if you do
        not intend to change a certain property, re-specify the existing value to avoid this
        behavior.</div>

    </div>
 
    
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
    <p class="p">Curl request syntax:</p>

    <pre class="pre codeblock">curl -u [admin]:[password] -X POST
  http://[localhost]/pools/default/buckets/default 
  -d evictionPolicy=[valueOnly | fullEviction]</pre>
</div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
    <p class="p">Curl request example:</p>

      <pre class="pre codeblock">curl -u admin:password -X POST
  http://10.5.2.54/pools/default/buckets/default 
  -d evictionPolicy=fullEviction</pre>

    
    </div>

    
    <div class="section"><h2 class="title sectiontitle">Response codes</h2>
    <pre class="pre codeblock">
"errors": {
        "evictionPolicy": "Eviction policy must be either 'valueOnly' or 'fullEviction'"
    </pre>

    
    
    </div>

  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-bucket-intro.html" title="The Buckets REST API creates, deletes, flushes, and retrieves information about buckets and bucket operations.">Buckets API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-bucket-set-priority.html" title="The disk I/O priority for a bucket is set with the /pools/default/buckets/[bucket-name] URI and the threadNumber setting.">Setting disk I/O priority</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../REST/rest-bucket-parameters.html" title="To modify bucket parameters, use the POST /pools/default/buckets/[bucket-name] HTTP method and URI with the bucket name being the REST API endpoint.">Changing bucket parameters</a></div>
</div>
</nav>
</body>
</html>