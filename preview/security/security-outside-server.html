<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="concept">
<meta name="description" content="Security outside Couchbase Server involves configuration of IP tables and ports."><meta name="DC.Relation" scheme="URI" content="../security/security-best-practices.html">
<meta name="DC.Relation" scheme="URI" content="../security/security-inside-server.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="concept_h5v_5jc_bq">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Security outside Couchbase Server</title>
</head>
<body id="concept_h5v_5jc_bq">


 <h1 class="title topictitle1">Security outside Couchbase Server</h1>

 
 <div class="body conbody"><p class="shortdesc">Security outside Couchbase Server involves configuration of IP tables and ports. </p>

  <p class="p">To secure the host machine where Couchbase Server is installed, the best practices include
   encrypting certain data locations using transparent data encryption technologies such as <a class="xref" href="http://www.vormetric.com/data-security-solutions/use-cases/big-data-security">Vormetric</a>:</p>

  <ul class="ul">
   <li class="li">Data and index file path (the default data path on Linux) at
     <span class="ph filepath">/opt/couchbase/var/lib/couchbase/data</span>.</li>

   <li class="li">Tools path at <span class="ph filepath">/opt/couchbase/bin/</span>.</li>

   <li class="li">Password files at <span class="ph filepath">/opt/couchbase/var/lib/couchbase/isasl.pw</span> and <span class="ph filepath">/opt/couchbase/var/lib/config/</span>.</li>

  
  </ul>

  <p class="p">For additional security:</p>

  <ul class="ul">
   <li class="li">Allow administrative access to Couchbase Server only through specific machines. To allow
    access, turn on OS auditing on these machines.</li>

   <li class="li">Use IPSec on your local network.</li>

  </ul>

  <div class="section"><h2 class="title sectiontitle">How to configure IP tables and ports</h2>
   
   <div class="p">To configure IP tables for Linux, you have to edit the file located in
     <span class="ph filepath">/etc/sysconfig/iptables</span> as follows:
    <pre class="pre codeblock">##allow everyone to access port 80 and 443##
   -A INPUT -m state --state NEW -p tcp --dport 80 -j ACCEPT
   -A INPUT -m state --state NEW -p tsp --dport 443 -j ACCEPT</pre>
</div>

   <p class="p">Also keep in mind that certain Couchbase ports are used for node-to-node and some for node-to-client communication.</p>

  
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. Important Couchbase ports</span></caption>
    
    
    
    
    <thead class="thead" align="left">
     <tr class="row">
      <th class="entry" valign="top" width="25%" id="d143938e92">Port</th>

      <th class="entry" valign="top" width="50%" id="d143938e95">Description</th>

      <th class="entry" valign="top" width="12.5%" id="d143938e98">Node to node</th>

      <th class="entry" valign="top" width="12.5%" id="d143938e101">Node to client</th>

     </tr>

    </thead>

    <tbody class="tbody">
     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">8091</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Web administration port</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">8092</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Couchbase API port</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11207</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal/external bucket port for SSL</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11209</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal bucket port</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">No</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11210</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal/external bucket port</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11211</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Client interface (proxy)</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11214</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Incoming SSL proxy</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">No</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">11215</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal outgoing SSL proxy</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">No</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">18091</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal REST HTTPS for SSL</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">18092</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Internal CAPI HTTPS for SSL</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">No</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">Yes</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">4369</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Erlang port mapper (epmd)</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">No</td>

     </tr>

     <tr class="row">
      <td class="entry" valign="top" width="25%" headers="d143938e92 ">21100 to 21199 (inclusive)</td>

      <td class="entry" valign="top" width="50%" headers="d143938e95 ">Node data exchange</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e98 ">Yes</td>

      <td class="entry" valign="top" width="12.5%" headers="d143938e101 ">No</td>

     </tr>

    </tbody>
</table>
</div>

   <div class="note note"><span class="notetitle">Note:</span> A sample script for configuring the IP tables firewall settings is also
    provided in the following blog posting: <a class="xref" href="http://blog.couchbase.com/iptables-firewall-settings-couchbase-db-and-couchbase-mobile-syncgateway">IPTables Firewall Settings for Couchbase DB and Couchbase Mobile
    Sync_gateway</a></div>

  </div>

 </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../security/security-best-practices.html" title="Best practices for security consist of guidelines and tips to provide security features throughout the network.">Best security practices</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../security/security-inside-server.html" title="Best security practices inside the Couchbase Server cover passwords, bucket authentication, read-only administrators, access logs, and encrypted administrative access.">Security inside Couchbase Server</a></div>
</div>
</nav>
</body>
</html>