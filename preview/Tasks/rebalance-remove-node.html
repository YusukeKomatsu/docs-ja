<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="topic">
<meta name="description" content="Removing a node marks the node for removal from the cluster and completely disables the node from serving any requests across the cluster."><meta name="DC.Relation" scheme="URI" content="../Tasks/cluster-maintenance.html">
<meta name="DC.Relation" scheme="URI" content="../Tasks/rebalance-adding-nodes.html">
<meta name="DC.Relation" scheme="URI" content="../Tasks/tasks-rebalance.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="topic_byh_lbg_q4">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Removing nodes</title>
</head>
<body id="topic_byh_lbg_q4">


  <h1 class="title topictitle1">Removing nodes</h1>

  
  <div class="body"><p class="shortdesc">Removing a node marks
    the node for removal from the cluster and completely disables the node from serving any
    requests across the cluster.</p>

    <p class="p">Once a node is removed, it is no longer part of the cluster and can be switched off, updated, or upgraded. 
      Removing a node does not stop the node from servicing requests.
      Instead, it only marks the node ready for removal from the cluster. You must perform a
      rebalance operation to complete the removal process.</p>

    
   <div class="note important"><span class="importanttitle">Important:</span> Before you remove a node from the cluster, ensure that you have the capacity within the remaining nodes to handle the workload. For the best results, 
        use swap rebalance. </div>

    
    <div class="note warning"><span class="warningtitle">Warning:</span> Occasionally, during an online upgrade, VM-based configurations can swap out old 
      VM nodes in place of a totally new set.  If all old nodes are removed from the cluster, 
      clients may no longer know about any nodes and fail to connect. To prevent such problems, 
      make sure that you provide one of the following solutions: <ul class="ul">
          <li class="li">At least one of the original nodes is maintained in the cluster, and this node is
            listed in the client's server configuration.</li>

          <li class="li">The client's server configuration is appropriately updated to include at least one
            new node before the last old node is removed.</li>

        </ul>
</div>

    
    <p class="p">Nodes can be removed either via the Couchbase Web Console or CLI.</p>

      
<div class="section"><h2 class="title sectiontitle">Using the Couchbase Web Console</h2>
          <p class="p">You can remove a node from the cluster from within the <span class="keyword wintitle">Manage Server Nodes</span> 
            section of the Couchbase Web Console.</p>
<p class="p">Click on the <span class="ph uicontrol">Remove Server</span> button 
              next to the node you want to remove. A warning will appear to confirm that you want to remove the node. 
              Click <span class="ph uicontrol">Remove</span> to mark the node for removal.</p>

            </div>

                
<div class="section"><h2 class="title sectiontitle">Using CLI</h2>
              <p class="p">You cannot mark a node for removal from the command-line without simultaneously initiating a
                rebalance operation. The <span class="keyword cmdname">rebalance</span> command accepts one or more
                <samp class="ph codeph">--server-add</samp> or <samp class="ph codeph">--server-remove</samp> options. This adds or
                removes the server from the cluster, and immediately initiates a rebalance operation.</p>

                  
                  <p class="p">T o remove a node during a rebalance operation:</p>

                  
                  <pre class="pre codeblock">
&gt; couchbase-cli rebalance --cluster=127.0.0.1:8091 \
          -u Administrator -p Password \
          --server-remove=192.168.0.73
</pre>

                  
                </div>


  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Tasks/cluster-maintenance.html">Cluster maintenance</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../Tasks/rebalance-adding-nodes.html" title="Nodes can be added to a cluster via the UI, CLI, or REST API.">Adding nodes</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../Tasks/tasks-rebalance.html" title="Rebalancing is the process of redistributing information across nodes.">Rebalancing</a></div>
</div>
</nav>
</body>
</html>