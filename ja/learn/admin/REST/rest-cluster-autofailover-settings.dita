<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="ja" id="rest-cluster-autofailover-settings">
  <title>オートフェイルオーバ設定の取得</title>
  <shortdesc>オートフェイルオーバの設定は<codeph>GET /settins/autoFailover</codeph> HTTPメソッドとURIを使用して取得します。</shortdesc>
  <refbody>
    
    <section><title>HTTPメソッドとURI</title>
      <p>
        クラスタのオートフェイルオーバの設定はこのリクエストを使用して取得します。オートフェイルオーバは全てのクラスタのグローバル設定です。
        この値を参照するには認証が必要です。
      </p>
      <codeblock>GET /settings/autoFailover</codeblock>
      
      <p>パラメータは次のものを含みます:</p>
      <ul>
        <li><codeph>enabled</codeph>: 値は true か false です。Trueはオートフェイルオーバを有効にし、Falseは無効にします。</li>
        <li><codeph>timeout</codeph>: オートフェイルオーバがクラスタで実行するまでに経過する秒数です。</li>
        <li><codeph>count</codeph>: 値は 0 か 1です。クラスタのノードが自動的にフェイルオーバできる回数です。
        オートフェイルオーバが1度発生した後、カウントが 1 に設定され、カウントが 0 にリセットされない限りCouchbaseサーバはクラスタのオートフェイルオーバを再び行うことはありません。
        一度に複数のノードのフェイルオーバを行うには手動でフェイルオーバを実行します。</li>
      </ul>

    </section>
    
    <section><title>シンタックス</title>
      <p>Curlリクエストシンタックス:</p>
      <codeblock>curl -u [admin]:[password] http://[localhost]:8091/settings/autoFailover</codeblock>

    </section>
    
    <section><title>例</title>
      <p>Curlリクエスト例</p>
      <codeblock>curl -u admin:password http://10.5.2.54:8091/settings/autoFailover
</codeblock>
    </section>
    
    <section><title>レスポンス</title>
    <p>クラスタのオートフェイルオーバの設定が成功した場合、Couchbaseサーバは以下のように返します:</p>
    <codeblock>{
    "count": 0, 
    "enabled": false, 
    "timeout": 120
}</codeblock>
     
    </section>

    
    <section><title>レスポンスコード</title>
    <p>エラーを含む場合:</p>
    <codeblock>HTTP/1.1 401 Unauthorized
This endpoint isn't available yet.
</codeblock>
    <codeblock>GET /settings/autoFailover HTTP/1.1
Host: localhost:8091
Authorization: Basic YWRtaW46YWRtaW4=
Accept: */*
</codeblock>
    <codeblock>HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: nnn
{ "enabled": false, "timeout": 30, "count": 0 }
</codeblock>
    </section>
  </refbody>
</reference>
