<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="To retrieve statistics for a node, first retrieve a list of nodes"><meta name="DC.Relation" scheme="URI" content="../REST/rest-server-nodes.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-node-index-path.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="reference_qwy_nmf_q4">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Retrieving statistics</title>
</head>
<body id="reference_qwy_nmf_q4">


  <h1 class="title topictitle1">Retrieving statistics</h1>

  
  <div class="body refbody"><p class="shortdesc">To retrieve statistics for a node, first retrieve a list of nodes </p>

    <div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
      
      <pre class="pre codeblock">
GET /pools/default/buckets/default/nodes/[host]:[port]/stats
</pre>

      
      <div class="p">To obtain statistics for a node:
        <ol class="ol">
          <li class="li">Retrieve a list of nodes in a cluster.</li>

          <li class="li">Send the statistics request using the IP address and port for a node in the cluster.</li>

        </ol>

      </div>

    </div>

      

      <div class="section"><h2 class="title sectiontitle">Syntax</h2>
        <p class="p">Curl request syntax to retrieve a list of nodes:</p>

        <pre class="pre codeblock">curl -u [admin]:[password] http://[localhost]:[port]/pools/default/buckets/default/nodes
</pre>

        <p class="p">Curl request syntax to retrieve statistics about a node:</p>

        <pre class="pre codeblock">curl -u a[admin]:[password] http://[localhost]:[port]/pools/default/buckets/default/nodes/[localhost]%3A[port]/stats</pre>

      </div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
      <p class="p">Curl request example that retrieves a list of nodes from a cluster:</p>

      
      <pre class="pre codeblock">curl -u admin:password http://10.5.2.118:8091/pools/default/buckets/default/nodes
</pre>

      
      <p class="p">The curl request for a node list sends the following HTTP request:</p>

      
      <pre class="pre codeblock">GET /pools/default/buckets/default/nodes HTTP/1.1
User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
Host: 10.5.2.118:8091
Accept: */*
</pre>

      
        
      
      
      <p class="p">If Couchbase Server successfully handles the request, a response similar to the following
        displays:</p>

      
      <pre class="pre codeblock">{"servers":[
  {"hostname":"10.5.2.118:8091",
  "uri":"/pools/default/buckets/default/nodes/10.5.2.118%3A8091",
  "stats":
      {"uri":"/pools/default/buckets/default/nodes/10.5.2.118%3A8091/stats"}}
    ....
</pre>


      <p class="p">Curl request example to retrieve statistics for a specific server node. Use the node's IP
        address and port shown in the response and add <samp class="ph codeph">/stats</samp> as the endpoint:</p>

      
      <pre class="pre codeblock">curl -u admin:password http://10.5.2.118:8091/pools/default/buckets/default/nodes/10.5.2.118%3A8091/stats
</pre>

      
      <p class="p">The curl request for a node's statistics sends the following HTTP request:</p>

      
      <pre class="pre codeblock">GET /pools/default/buckets/default/nodes/10.4.2.4%3A8091/stats HTTP/1.1
User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
Host: 10.4.2.4:8091
Accept: */*
</pre>
   
      
      
      </div>

      
      <div class="section"><h2 class="title sectiontitle">Response</h2>
      
        <p class="p">The following statistics returned are for the individual bucket associated with that node
        in the previous example.</p>

      
      <pre class="pre codeblock">{"hostname":"10.5.2.118:8091","hot_keys":[{"name":"[2012-11-05::3:47:01]"
....
"samplesCount":60,"isPersistent":true,"lastTStamp":1352922180718,"interval":1000}}
</pre>

      
      
    </div>

  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-server-nodes.html" title="The Server Nodes REST API manages nodes in a cluster.">Server nodes API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-node-index-path.html" title="The path for the index files can be configured with POST /nodes/self/controller/settings.">Setting index paths</a></div>
</div>
</nav>
</body>
</html>