<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="ja">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="concept">
<meta name="description" content="グレイスフルフェイルオーバは、実行中の操作が完了した後に、データを失うことなく、管理者が安全にノードをクラスタからフェイルオーバする方法を提供します。"><meta name="DC.Relation" scheme="URI" content="../Concepts/concept-nodeFailover.html">
<meta name="DC.Relation" scheme="URI" content="../Tasks/tasks-nodeFailover.html">
<meta name="DC.Relation" scheme="URI" content="../Tasks/hard-failover.html">
<meta name="DC.Relation" scheme="URI" content="delta-node-recovery.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="concept_gvw_zsp_yn">
<meta name="DC.Language" content="ja">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>グレイスフルフェイルオーバ</title>
</head>
<body id="concept_gvw_zsp_yn">


 <h1 class="title topictitle1">グレイスフルフェイルオーバ</h1>

	
 
 
 <div class="body conbody"><p class="shortdesc">
	グレイスフルフェイルオーバは、実行中の操作が完了した後に、データを失うことなく、管理者が安全にノードをクラスタからフェイルオーバする方法を提供します。
 </p>

  
	<p class="p">
		 グレイスフルフェイルオーバを利用すると、すべての実行中の操作が完了するまで待ちます。
		 例えば、データをノードに書き込むプロセスや、データをレプリカvBucketに転送するプロセスの完了です。
		 レプリカvBucketはアクティブvBucketに昇格し、フェイルオーバしたノード上のアクティブvBucketは、レプリカvBucketになります。
		 これは、レプリカvBucketがアクティブvBucketと同期された後にフェイルオーバを実行するためで、
		 グレイスフルフェイルオーバはノードをフェイルオーバするのに、より時間がかかることがあります。
	</p>

  
	<p class="p">
		サーバノードがグレイスフルフェイルオーバされている間(実行中の操作が完了するまで)、
		フェイルオーバを停止することが可能です。その後、グレイスフルフェイルオーバを再開することができます。
		ノードをフェイルオーバした後、<samp class="ph codeph">デルタ</samp>もしくは、<samp class="ph codeph">フル</samp>リカバリによってノードをクラスタに再追加することができます。
	</p>

  
   
	<div class="note note"><span class="notetitle">注:</span> 
		ハードフェイルオーバは即座にノードをクラスタからフェイルオーバするため、データロスが発生することがあります。
		ハードフェイルオーバは一般的にノードに障害が起きた場合に利用します。自動フェイルオーバはハードフェイルオーバです。
	</div>

  
	<p class="p">
		グレイスフルフェイルオーバの実行には、以下の条件に一致する必要があります、一致しない場合、ハードフェイルオーバとなります。
	</p>

  
   <ul class="ul">
    <li class="li">サーバノードが健全な状態である必要があります。</li>

	<li class="li">フェイルオーバするサーバノードが保持するすべてのアクティブvBucketに対応するレプリカvBucketが必要です。</li>

    <li class="li">少なくとも一つのレプリカvBucketが必ず必要です。</li>

    </ul>

  
  <p class="p">例えば:</p>

  <ul class="ul">
	  <li class="li">7ノードのクラスタでバケットのレプリカ数が1の場合、1台のノードのみ、グレイスフルフェイルオーバできます。</li>

	  <li class="li">7ノードのクラスタでバケットのレプリカ数が2の場合、2台のノードのみ、グレイスフルフェイルオーバできます。</li>

	  <li class="li">7ノードのクラスタでバケットのレプリカ数が3の場合、3台のノードのみ、グレイスフルフェイルオーバできます。</li>

  </ul>

  
  <p class="p">
	  グレイスフルフェイルオーバでは、(ハードフェイルオーバと違って)アクティブvBucketの数が変化しません。
	  しかし、レプリカvBucketの数は減少し、不均一に分散された状態になります。
  </p>

   
   
   
   
  
  
  
  
   
 
    

   
   
   
  

  
  
  
 </div>

 
 <nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>親トピック:</strong> <a class="link" href="../Concepts/concept-nodeFailover.html" title="Failover is the process in which a node in a cluster is declared as unavailable and a replica vBucket is enabled.">Failing over nodes</a></div>
<div class="previouslink"><strong>前のトピック:</strong> <a class="link" href="../Tasks/tasks-nodeFailover.html" title="Failing over a node means that Couchbase Server removes the node from a cluster and makes replicated data at other nodes available for client requests.">Failover considerations</a></div>
<div class="nextlink"><strong>次のトピック:</strong> <a class="link" href="../Tasks/hard-failover.html" title="Hard failover immediately fails over nodes from clusters.">Hard failover</a></div>
</div>

<div class="linklist linklist">
<div><a class="link" href="delta-node-recovery.html" title="デルタノードリカバリを使うと、ノードをクラスタに再追加後に、変更されたデータの差分を反映させることができます。">デルタノードリカバリ</a></div></div>
</nav>

</body>
</html>