<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="To flush all buckets, use the POST /pools/default/buckets/default/controller/doFlush HTTP method and URI."><meta name="DC.Relation" scheme="URI" content="../REST/rest-bucket-intro.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-bucket-delete.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rest-bucket-flush">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Flushing buckets</title>
</head>
<body id="rest-bucket-flush">


  <h1 class="title topictitle1">Flushing buckets</h1>

  
  
  <div class="body refbody"><p class="shortdesc">To flush all buckets, use the <samp class="ph codeph">POST
      /pools/default/buckets/default/controller/doFlush</samp> HTTP method and URI.</p>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
    
    <p class="p">The <samp class="ph codeph">doFlush</samp> operation empties the contents of the specified bucket, deleting
      all stored data. The operation only succeeds if flush is enabled on configured bucket.</p>

    
    <div class="note warning"><span class="warningtitle">Warning:</span> This operation is data destructive. The service makes no attempt to confirm or double check
      the request. Client applications using this are advised to double check with the end user
      before sending such a request. You can control and limit the ability to flush individual
      buckets by setting the <samp class="ph codeph">flushEnabled</samp> parameter on a bucket in Couchbase Web Console or via
      <samp class="ph codeph">cbepctl flush_param</samp>.</div>

      
      <p class="p">Parameters and payload data are ignored, but the request must including the authorization
        header if the system has been secured.</p>

      
      <div class="note important"><span class="importanttitle">Important:</span> The flush request may lead to significant disk activity as the data in the bucket is deleted
        from the database. The high disk utilization may affect the performance of your server until
        the data has been successfully deleted. </div>

      
      <div class="note note"><span class="notetitle">Note:</span> The flush request is not transmitted over XDCR replication configurations;.
        The remote bucket is not flushed. </div>

      <p class="p">Couchbase Server returns a HTTP 404 response if the URI is invalid or if it does not
        correspond to an active bucket in the system.</p>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
      <pre class="pre codeblock">POST /pools/default/buckets/default/controller/doFlush</pre>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Syntax</h2>
      <p class="p">Curl request syntax:</p>

      <pre class="pre codeblock">curl -X POST -u [admin]:[password]
  http://[localhost]:8091/pools/default/buckets/default/controller/doFlush
      </pre>

      
      <p class="p">Raw HTTP request syntax:</p>

      <pre class="pre codeblock">POST /pools/default/buckets/default/controller/doFlush
Host: localhost:8091
Authorization: Basic xxxxxxxxxxxxxxxxxxx
      </pre>

    </div>

    
    <div class="section"><h2 class="title sectiontitle">Example</h2>
      <p class="p">Curl request example:</p>

      <pre class="pre codeblock">
curl -X POST 'http://admin:password@localhost:8091/pools/default/buckets/default/controller/doFlush'
  </pre>

      
      <p class="p">Raw HTTP request example:</p>

      <pre class="pre codeblock">POST /pools/default/buckets/default/controller/doFlush
Host: 10.5.2.54:8091
Authorization: Basic xxxxxxxxxxxxxxxxxxx
      </pre>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Response codes</h2>
      <p class="p">If the flush is successful, the HTTP response code is <samp class="ph codeph">200</samp> is returned.</p>

      <pre class="pre codeblock">HTTP/1.1 200 OK</pre>

      
      <p class="p">If flushing is disable for the specified bucket, a 400 response code is returned with the
        bucket status. For example:</p>

      <pre class="pre codeblock">{"_":"Flush is disabled for the bucket"}</pre>

      
    <p class="p">If the bucket does not exist, a 404 response code is returned.</p>

    <pre class="pre codeblock">404 Not Found</pre>

    </div>


  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-bucket-intro.html" title="The Buckets REST API creates, deletes, flushes, and retrieves information about buckets and bucket operations.">Buckets API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-bucket-delete.html" title="To delete buckets, use the DELETE /pools/default/buckets/[bucket-name] HTTP method and URI.">Deleting buckets</a></div>
</div>
</nav>
</body>
</html>