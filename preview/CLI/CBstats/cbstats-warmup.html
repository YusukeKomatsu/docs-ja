<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="The cbstats warmup command shows statistics related to warmup logic."><meta name="DC.Relation" scheme="URI" content="../../CLI/cbstats-intro.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBstats/cbstats-vbucket.html">
<meta name="DC.Relation" scheme="URI" content="../../CLI/CBstats/cbstats-workload.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cbstats-warmup">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../commonltr.css">
<title>Warmup</title>
</head>
<body id="cbstats-warmup">


	<h1 class="title topictitle1">Warmup</h1>

	
	
	<div class="body refbody"><p class="shortdesc">The <samp class="ph codeph">cbstats warmup</samp> command shows statistics related to warmup logic.</p>

		<div class="section"><h2 class="title sectiontitle">Description</h2>
			<p class="p">If a Couchbase Server node is starting up for the first
				time, it creates whatever DB files necessary and begin serving data immediately.
				However, if there is already data on disk (likely because the node rebooted or the
				service restarted), the node needs to read all of this data off of disk before it
				can begin serving data. This is called warmup. Depending on the size of data, this
				can take some time. </p>
<p class="p">The <samp class="ph codeph">cbstats warmup</samp> command is used to
				get information about server warmup, including the status of warmup and whether
				warmup is enabled. The following shows the command
			syntax:</p>
<pre class="pre codeblock">cbstats [host]:[dataport] -b bucket_name -p bucket_password raw warmup

cbstats [host]:11210 warmup
</pre>

			<p class="p">The bucket does not need to be specified, if the default bucket statistics are being requested.</p>

			
			
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. cbstats options</span></caption>
					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="33.33333333333333%" id="d32563e51">Option</th>

							<th class="entry" valign="top" width="33.33333333333333%" id="d32563e54">Description</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e51 ">-a</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e54 ">Iterate over all buckets. This requires administrator username and password.</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e51 ">-p</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e54 ">The password for the bucket if one exists.</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e51 ">-d</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e54 ">The bucket to get statistics from. Default: default.</td>

						</tr>

					</tbody>

				</table>
</div>

			

			
			<p class="p">The following statistics are of particular interest when monitoring the warmup.</p>
<dl class="dl">
				
					<dt class="dt dlterm">ep_warmup_thread</dt>

					<dd class="dd">This is the overall indication of whether or not warmup is still running.
						Look for values: running and complete.</dd>

				
				
					<dt class="dt dlterm">ep_warmup_state</dt>

					<dd class="dd">This describes which phase of warmup is currently running. Look for values:
						loading keys, loading access log, and done. </dd>

				
			</dl>
<ul class="ul">
				<li class="li">When <samp class="ph codeph">ep_warmup_state</samp> is loading keys, compare
						<samp class="ph codeph">ep_warmup_key_count</samp> (current number) with
						<samp class="ph codeph">ep_warmup_estimated_key_count</samp> (target number).</li>

				<li class="li">When <samp class="ph codeph">ep_warmup_state</samp> is loading access log, compare
						<samp class="ph codeph">ep_warmup_value_count</samp> (current number) with
						<samp class="ph codeph">ep_warmup_estimated_value_count</samp> (target number).</li>

			</ul>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2. cbstats warmup stats</span></caption>
					
					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="33.33333333333333%" id="d32563e157">Statistic</th>

							<th class="entry" valign="top" width="33.33333333333333%" id="d32563e160">Description</th>

							<th class="entry" valign="top" width="33.33333333333333%" id="d32563e163">Value Type</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Shows if warmup is enabled / disabled</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">String values: enabled or disabled</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_dups</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Number of failures due to duplicate keys</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_estimated_key_count</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Estimated number of keys in database</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer. Default: unknown</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_estimate_time</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Estimated time in microseconds to do warmup</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer.</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_estimated_value_count</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Estimated number of key data to read based on the access
								log</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer. Default: unknown</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_item_expired</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Number if expired items.</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer. Default: 0</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_keys_count</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Number of keys warmed up</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_keys_time</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Total time spent by loading persisted keys</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_min_item_threshold</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Enable data traffic after loading this percentage of key
								data</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_min_memory_threshold</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Enable data traffic after filling this % of memory</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer (%)</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_oom</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Number of out of memory failures during warmup</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_state</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">The current state of the warmup thread</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">String</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_thread</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Warmup thread status</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">String values: running or complete</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_time</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Total time spent by loading data (warmup)</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer (microseconds) </td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e157 ">ep_warmup_value_count</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e160 ">Number of values warmed up</td>

							<td class="entry" valign="top" width="33.33333333333333%" headers="d32563e163 ">Integer</td>

						</tr>

					</tbody>

				</table>
</div>
</div>

		
		<div class="section"><h2 class="title sectiontitle">Example</h2>
			<p class="p">Example request:</p>

			<pre class="pre codeblock">
cbstats 10.5.2.117:11210 warmup
			</pre>

		
		</div>

		
		<div class="section"><h2 class="title sectiontitle">Response</h2>
			<p class="p">Example response:</p>

			<pre class="pre codeblock">
 ep_warmup:                       enabled
 ep_warmup_dups:                  0
 ep_warmup_estimate_time:         57546
 ep_warmup_estimated_key_count:   0
 ep_warmup_estimated_value_count: unknown
 ep_warmup_item_expired:          0
 ep_warmup_key_count:             0
 ep_warmup_keys_time:             529022
 ep_warmup_min_item_threshold:    100
 ep_warmup_min_memory_threshold:  100
 ep_warmup_oom:                   0
 ep_warmup_state:                 done
 ep_warmup_thread:                complete
 ep_warmup_time:                  529192
 ep_warmup_value_count:           0
	
			</pre>

			
		</div>

	</div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../CLI/cbstats-intro.html" title="The cbstats tool is used to get node and cluster-level statistics about performance and items in storage.">cbstats tool</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../CLI/CBstats/cbstats-vbucket.html" title="The cbstats vbucket commands provide information">vBucket</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../CLI/CBstats/cbstats-workload.html" title="The cbstats workload command provides the workload status of threads for buckets.">Workload</a></div>
</div>
</nav>
</body>
</html>