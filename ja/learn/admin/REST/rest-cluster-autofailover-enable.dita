<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="ja" id="rest-cluster-autofailover-enable">
  <title>オートフェイルオーバの有効化と無効化</title>
  <shortdesc>オートフェイルオーバは<codeph>POST /settings/autoFailover</codeph> HTTPメソッドとURIで有効化・無効化します。</shortdesc>
  <refbody>
    <section><title>HTTPメソッドとURI</title>
    <p>これは全てのクラスタに適応されるグローバル設定です。この値を変更するには認証が必要です。</p>
      <codeblock>POST /settings/autoFailover</codeblock>
      
      <p>パラメータは以下を含む:</p>
      <ul>
        <li>
          <codeph>enabled</codeph>: 値は true か false です。Couchbaseサーバがクラスタのオートフェイルオーバを実行するか否かを指定します。
        </li>
        <li>
          <codeph>timeout</codeph>: 30〜3600の間の正の整数です。Couchbaseサーバがノードのオートフェイルオーバを実行する前にノードが落ちている秒数です。
          <codeph>enabled=true</codeph>の時は必須ですが、<codeph>enabled=false</codeph>の場合は任意です。
        </li>
      </ul>
    </section>
    
    <section><title>シンタックス</title>
    <p>Curlリクエストシンタックス:</p>
    <codeblock>curl -u [admin]:[password] http://[localhost]:8091/settings/autoFailover -d [parameter]</codeblock>

    </section>
    
    
    <section><title>例</title>
      <p>Curlリクエスト例:</p>
    <codeblock>curl -i -u admin:password 
  http://10.5.2.54:8091/settings/autoFailover \
  -d 'enabled=true&amp;timeout=600'
</codeblock>
      
      <p>Raw HTTPリクエスト例:</p>
      <codeblock>POST /settings/autoFailover HTTP/1.1
Host: 10.5.2.54:8091
Content-Type: application/x-www-form-urlencoded
Authorization: Basic YWRtaW46YWRtaW4=
Content-Length: 14
enabled=true&amp;timeout=600
</codeblock>
      
    </section>
    
    
    <section><title>レスポンスコード</title>
    <codeblock>HTTP/1.1 200 OK
Server: Couchbase Server
Pragma: no-cache
Date: Sat, 18 Oct 2014 00:26:28 GMT
Content-Length: 0
Cache-Control: no-cache</codeblock>
    <p>エラーを含む場合:</p>
    <codeblock>400 Bad Request, The value of "enabled" must be true or false.
400 Bad Request, The value of "timeout" must be a positive integer bigger or equal to 30.
401 Unauthorized
This endpoint isn't available yet.
</codeblock>
      
    </section>
  </refbody>
</reference>
