<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="reference">
<meta name="description" content="XDCR data encryption provides SSL encryption for data replication. Enterprise Edition only."><meta name="DC.Relation" scheme="URI" content="../REST/rest-xdcr-intro.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-xdcr-delete-ref.html">
<meta name="DC.Relation" scheme="URI" content="../REST/rest-xdcr-delete-replication.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rest-xdcr-data-encrypt">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Managing XDCR data encryption</title>
</head>
<body id="rest-xdcr-data-encrypt">


  <h1 class="title topictitle1">Managing XDCR data encryption</h1>

  
  <div class="body refbody"><p class="shortdesc">XDCR data encryption provides SSL encryption for data replication. Enterprise Edition only.</p>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
    <p class="p">The process for configuring XDCR with data encryption  involves
      configuring the XDCR cluster reference with data encryption enabled, providing the SSL
      certificate, and configuring replication.</p>
</div>

    
    <div class="section"><h2 class="title sectiontitle">HTTP method and URI</h2>
    <p class="p">The following summarizes the HTTP methods used for defining XDCR data encryption:</p>

    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
        
        
        
        <thead class="thead" align="left">
          <tr class="row">
            <th class="entry" valign="top" width="33.33333333333333%" id="d104281e43">HTTP method</th>

            <th class="entry" valign="top" width="33.33333333333333%" id="d104281e46">URI path</th>

            <th class="entry" valign="top" width="33.33333333333333%" id="d104281e49">Description</th>

          </tr>

        </thead>

        <tbody class="tbody">
          <tr class="row">
            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e43 ">GET</td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e46 "><samp class="ph codeph">/pools/default/remoteClusters</samp></td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e49 ">Gets the destination cluster reference</td>

          </tr>

          <tr class="row">
            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e43 ">POST</td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e46 "><samp class="ph codeph">/pools/default/remoteClusters</samp></td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e49 ">Creates a reference to the destination cluster</td>

          </tr>

          <tr class="row">
            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e43 ">PUT</td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e46 "><samp class="ph codeph">/pools/default/remoteClusters/UUID</samp></td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e49 ">Modifies the destination cluster reference</td>

          </tr>

          <tr class="row">
            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e43 ">DELETE</td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e46 "><samp class="ph codeph">/pools/default/remoteClusters/UUID</samp></td>

            <td class="entry" valign="top" width="33.33333333333333%" headers="d104281e49 ">Deletes the reference to the destination cluster.</td>

          </tr>

        </tbody>

      </table>
</div>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Retrieving certificates</h2>
      <p class="p">To retrieve the SSL certificate from the destination cluster to the source cluster use the
        following HTTP method and URI:</p>

      <p class="p"><strong class="ph b">HTTP method and URI</strong></p>

      
      <pre class="pre codeblock">GET /pools/default/certificate</pre>

      
      <p class="p"><strong class="ph b">Syntax</strong></p>

      <pre class="pre codeblock">curl http://[remoteHost]:[port]/pools/default/certificate</pre>

      
      <p class="p"><strong class="ph b">Example</strong></p>

      <pre class="pre codeblock">curl http://remoteHost:8091/pools/default/certificate &gt; ./remoteCert.pem</pre>

    </div>

    
    
    <div class="section"><h2 class="title sectiontitle">Regenerating certificates</h2>
      <p class="p">To regenerate a certificate on a destination cluster, use the following HTTP method and URI:</p>

      <p class="p"><strong class="ph b">HTTP method and URI</strong></p>

      <pre class="pre codeblock">POST /controller/regenerateCertificate</pre>

      
      <p class="p"><strong class="ph b">Example</strong></p>

      <pre class="pre codeblock">curl -X POST http://Administrator:asdasd@remoteHost:8091/controller/regenerateCertificate</pre>

    </div>



    <div class="section"><h2 class="title sectiontitle">Configuring XDCR with data encryption</h2>
      <p class="p">A POST to <samp class="ph codeph">/pools/default/remoteClusters</samp> creates the XDCR cluster reference from the
        source cluster to the destination cluster. Setting the <samp class="ph codeph">demandEncryption</samp> parameter to
        one (1) and providing the certificate name and location enables data encryption.</p>

      
      <p class="p"><strong class="ph b">HTTP method and URI</strong></p>

        <p class="p">The following HTTP method and URI modifies the destination cluster reference.</p>

          <pre class="pre codeblock">PUT /pools/default/remoteClusters</pre>

            
            
      <p class="p"><strong class="ph b">Syntax</strong></p>

            
            <pre class="pre codeblock">curl –X POST  -u Admin:myPassword
  http://localHost:port/pools/default/remoteClusters 
  -d name=&lt;clusterName&gt;             // Remote cluster name
  -d hostname=&lt;host&gt;:&lt;port&gt;       // FQDN of the remote host.
  -d username=&lt;adminName&gt;           // Remote cluster Admin name
  -d password=&lt;adminPassword&gt;       // Remote cluster Admin password
  -d demandEncryption=[0|1] --data-urlencode "certificate=$(cat remoteCert.pem)"
</pre>

            
            <p class="p"><strong class="ph b">Example</strong></p>

            
            <pre class="pre codeblock">curl –X POST 
-d name=remoteName  
-d hostname=10.3.4.187:8091
-d username=remoteAdmin –d password=remotePassword
-d demandEncryption=1 --data-urlencode "certificate=$(cat remoteCert.pem)"
http://Administrator:asdasd@192.168.0.1:8091/pools/default/remoteClusters/
</pre>
</div>

    
    
    <div class="section"><h2 class="title sectiontitle">Disabling data encryption</h2>
      
      <p class="p">To modify the XDCR configuration so that SSL
        data encryption is disabled, execute a PUT from the source cluster to the destination
        cluster with <samp class="ph codeph">demandEncryption=0</samp>.</p>

      
      <p class="p"><strong class="ph b">HTTP method and URI</strong></p>

      <pre class="pre codeblock">PUT /pools/default/remoteClusters</pre>

      
      <p class="p"><strong class="ph b">Example</strong></p>

      <pre class="pre codeblock">curl –X PUT  -u Admin:myPassword
  http://192.168.0.1:8091/pools/default/remoteClusters/
  -d name=remoteName 
  -d hostname=10.3.4.187:8091
  -d username=remoteAdmin –d password=remotePassword
  -d demandEncryption=0
</pre>

    </div>

    
  </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../REST/rest-xdcr-intro.html" title="The XDCR REST API is used to manage Cross Datacenter Replication (XDCR) operations.">XDCR API</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../REST/rest-xdcr-delete-ref.html" title="To delete an XDCR reference to a destination cluster, use the DELETE /pools/default/remoteClusters/[destination-cluster-name] HTTP method and URI.">Deleting a destination cluster reference</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../REST/rest-xdcr-delete-replication.html" title="To delete an XDCR replication, use the DELETE /controller/cancelXDCR HTTP method and URI.">Deleting XDCR replications</a></div>
</div>
</nav>
</body>
</html>