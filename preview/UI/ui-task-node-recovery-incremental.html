<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="task">
<meta name="description" content="Recovery is performed after a server node is failed over and before rebalance operations. Either Delta or Full recovery can be specified."><meta name="DC.Relation" scheme="URI" content="../UI/ui-server-nodes.html">
<meta name="DC.Relation" scheme="URI" content="../UI/ui-task-failover-graceful.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="task_g25_qmb_k4">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Recovering a node</title>
</head>
<body id="task_g25_qmb_k4">


    <h1 class="title topictitle1">Recovering a node</h1>

    
    <div class="body taskbody"><p class="shortdesc">Recovery is performed after a server node is failed over and before rebalance
        operations. Either Delta or Full recovery can be specified.</p>


        <div class="section context">
            <div class="p">The process for re-adding a server involves: <ol class="ol">
                    <li class="li">Fail over the node using either the graceful or hard failover method.
                        Graceful failover is recommended.</li>

                    <li class="li">After the node is failed over, specify whether to use delta or full
                        recovery.</li>

                    <li class="li">Perform maintenance operations on the node. </li>

                    <li class="li">Rebalance the cluster. During the rebalance, the same server node is added
                        back to the cluster using the specified recovery method.</li>

                </ol>

            </div>

            
            <p class="p">To use delta recovery during failover, recovery, and rebalance operations:</p>

        </div>

        
        
        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Navigate to <span class="ph uicontrol">Server Nodes</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Failover</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Select <span class="ph uicontrol">Graceful Failover</span>.</span>
                <div class="itemgroup info">When failover happens on a specific node, that node is marked as
                    <span class="ph uicontrol">Failed Over: Pending Removal</span></div>
                
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery.png" width="720"></div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Click <span class="ph uicontrol">Delta Recovery</span>. Alternatively, select <span class="ph uicontrol">Full
                    Recovery</span>.</span>
                <div class="itemgroup info">With delta recovery mode, Couchbase detects (with the Database Change
                    Protocol) which data files are up-to-date and which are out-of-date and then,
                    during rebalance, the existing data files on the failed over server node are
                    retained and the out-of-date files are updated. With full recovery mode, the
                    data files are removed from the failed over server node and then, during
                    rebalance, the node is populated with new data files (active and replica
                    vBuckets).</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To view the status of the server node, click <span class="ph uicontrol">Pending Rebalance</span>.</span>
                <div class="itemgroup info">The server node shows a <span class="ph uicontrol">Pending delta recovery</span> status
                    if delta recovery was selected. If you cancel the recovery, you can re-select
                    either delta or full recovery.</div>
                <div class="itemgroup stepresult"><img class="image" src="../images/ui-delta-recovery-pending.png" width="720"></div>
                
            
                    
                
                
                
            </li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Rebalance</span>.</span>
            <div class="itemgroup info">The rebalance operation must be performed to re-add the failed over server node to
                    the cluster.</div></li>
</ol>

    </div>

<nav class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../UI/ui-server-nodes.html" title="The Server Nodes section shows statistics across the server nodes in the cluster.">Server Nodes</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../UI/ui-task-failover-graceful.html" title="Failover is performed on a specific node via Server Nodes &gt; Failover">Failing over a node</a></div>
</div>
</nav>
</body>
</html>