<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2015">
<meta name="DC.rights.owner" content="(C) Copyright 2015">
<meta name="DC.Type" content="topic">
<meta name="description" content="Each Couchbase Server's instance can have its own hostname."><meta name="DC.Relation" scheme="URI" content="../Concepts/bp-cloudDeployment.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="topic_ggq_hfy_p4">
<link rel="stylesheet" type="text/css" href="../commonltr.css">
<title>Using hostnames</title>
</head>
<body id="topic_ggq_hfy_p4">


  <h1 class="title topictitle1">Using hostnames</h1>

  <div class="body"><p class="shortdesc">Each Couchbase Server's instance can have its own hostname.</p>

    <p class="p">When you first install Couchbase Server, you can access it 
      using a default IP address. There are cases, however, when you want to provide a hostname for each
      instance of a server. Each hostname you provide must be a valid one and will ultimately
      resolve to a valid IP Address. If you restart a node, it will use
      the hostname once again. If you fail over or remove a node from a cluster, the node needs to
      be configured with the hostname once again.</p>

      
      <p class="p">There are several ways you can provide hostnames: when installing a Couchbase Server on a
      machine, when adding a node to an existing cluster for online upgrade, or via a REST API call.
      Couchbase Server stores the hostnames in a config file on the disk.</p>

    <div class="section"><h2 class="title sectiontitle">Provide hostname on initial setup</h2>
      
         In the first screen, provide either a hostname or IP address under <span class="keyword wintitle">Configure
            Server Hostname</span>. The provided hostname survives node restart.
          <div class="fig fignone"><img class="image" src="../images/configure_server1.png" width="720"></div>

   
        
    </div>
 
    <div class="section"><h2 class="title sectiontitle">Provide hostname while adding a node</h2>
     
          If a new node is being added to an existing 2.0.1 or earlier
            Couchbase cluster, first set up the hostname for the new node in the setup
            wizard. Add a new node to a cluster by providing either a hostname or
            IP address under <span class="ph menucascade"><span class="ph uicontrol">Add Server</span> &gt; <span class="ph uicontrol">Server IP Address
              </span></span>.
          <div class="fig fignone"><img class="image" src="../images/hostname_add_node.png" width="720"></div>

      
    </div>

    <div class="section"><h2 class="title sectiontitle">Provide hostname via REST API</h2>
   
       Provide a host name for a node a host name with the REST request at the <span class="ph filepath">/node/controller/rename endpoint</span>. 
          <div class="p">If this method is used, provide the hostname before adding a node to a cluster. 
            If a hostname is provided for a node that is already part of a Couchbase cluster, 
            the server rejects the request and returns 
            <pre class="pre codeblock">error 400 reason: unknown ["Renaming is disallowed for nodes that are already part of a cluster"]</pre>

          <pre class="pre codeblock">curl -v -X POST -u Administrator:asdasd \
http://127.0.0.1:8091/node/controller/rename -d hostname=shz.localdomain</pre>
</div>

    </div>

      
      <div class="section"><h2 class="title sectiontitle">Hostname errors</h2>
      <p class="p">Provide the IP address and port for the node and administrative credentials for the
        cluster. The value you provide for <samp class="ph codeph">hostname</samp> must be a valid hostname for
        the node. Possible errors that can occur:</p>

      <ul class="ul">
        <li class="li"><samp class="ph systemoutput">Could not resolve the host name. The host name you provide as a parameter does not
          resolve to a IP address.</samp></li>

        <li class="li"><samp class="ph systemoutput">Could not listen. The host name resolves to an IP address, but no network connection
          exists for the address.</samp></li>

        <li class="li"><samp class="ph systemoutput">Could not rename the node because name was fixed at server start-up.</samp></li>

        <li class="li"><samp class="ph systemoutput">Could not save address after rename.</samp></li>

        <li class="li"><samp class="ph systemoutput">Requested name host name is not allowed. Invalid host name provided.</samp></li>

        <li class="li"><samp class="ph systemoutput">Renaming is disallowed for nodes that are already part of a cluster.</samp></li>

      </ul>

      </div>

      
     
    
      
  </div>

  <nav class="related-links">
<div class="linklist linklist">
<div><a class="link" href="../Concepts/bp-cloudDeployment.html" title="Couchbase Server is extremely easy to deploy in the cloud.">Couchbase in the cloud</a></div></div>
</nav>
  

</body>
</html>